@using System.Diagnostics
<MudSimpleTable Style="overflow-x: auto;">
    <thead>
        <tr>
            @if (headings != null)
            {
                foreach (var h in headings)
                {
                    <th>@h</th>
                }
            }

        </tr>
    </thead>
    <tbody>
        @foreach (var row in rows)
        {
            <tr>
                @foreach (var x in row.Split())
                {
                    <td>@x</td>
                }
            </tr>
        }
    </tbody>
</MudSimpleTable>

@code {
    [Parameter]
    public List<HistoricoAssistencia> Items { get; set; } = new List<HistoricoAssistencia>();
    //string[]? headings { get; set; }
    IEnumerable<T>? rows { get; set; }


    protected override async Task OnParametersSetAsync()
    {
        await Task.Delay(10);
        //foreach (var item in Items)
        //{
        //    headings = item.GetType().GetProperties().Select(k => k.Name).ToArray();
        //}

        var rows = Items.AsEnumerable().GroupBy(g => new { Mes = g.Data.Date })
                 .Select(x => new
                 {
                     Pax = x.Count(),
                     DepMais36 = x.Count(n => n.Notif >= 36)
                 }
             );

        Debug.WriteLine("Him here");
    }


    string[] headings = { "ID", "Name", "Email", "Gender", "IP Address" };
    //string[] rows = {
    //    @"1 Krishna kpartner0@usatoday.com Male 28.25.250.202",
    //    @"2 Webb wstitle1@ning.com Male 237.168.134.114",
    //    @"3 Nathanil nneal2@cyberchimps.com Male 92.6.0.175",
    //    @"4 Adara alockwood3@patch.com Female 182.174.217.152",
    //    @"5 Cecilius cchaplin4@shinystat.com Male 195.124.144.18",
    //    @"6 Cicely cemerine9@soup.io Female 138.94.191.43",
    //};
}

@*<MudTable Items="@Items" Dense="true" Hover="true" Bordered="true"
          Striped="true" Loading="IsVisible" RowsPerPage="31" FixedHeader="true" Height="400px">
    <ToolBarContent>
        <MudText>
            @HeaderText
        </MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh Style="white-space: nowrap;">Data</MudTh>
        <MudTh Style="white-space: nowrap;">Dia</MudTh>
        <MudTh Style="white-space: nowrap;">Total</MudTh>
        <MudTh Style="white-space: nowrap;">DEP</MudTh>
        <MudTh Style="white-space: nowrap;">% DEP</MudTh>
        <MudTh Style="white-space: nowrap;">ARR</MudTh>
        <MudTh Style="white-space: nowrap;">% ARR</MudTh>
        <MudTh Style="white-space: nowrap;">JetBridge</MudTh>
        <MudTh Style="white-space: nowrap;">% JetBridge</MudTh>
        <MudTh Style="white-space: nowrap;">Remote</MudTh>
        <MudTh Style="white-space: nowrap;">% Remote</MudTh>
        <MudTh Style="white-space: nowrap;">>36H</MudTh>
        <MudTh Style="white-space: nowrap;">% >36H</MudTh>
        <MudTh Style="white-space: nowrap;">&lt;36H</MudTh>
        <MudTh Style="white-space: nowrap;">WCHR</MudTh>
        <MudTh Style="white-space: nowrap;">WCHS</MudTh>
        <MudTh Style="white-space: nowrap;">WCHC</MudTh>
        <MudTh Style="white-space: nowrap;">MAAS</MudTh>
        <MudTh Style="white-space: nowrap;">BLND</MudTh>
        <MudTh Style="white-space: nowrap;">DEAF</MudTh>
        <MudTh Style="white-space: nowrap;">DPNA</MudTh>
        <MudTh Style="white-space: nowrap;">STCR</MudTh>
        <MudTh Style="white-space: nowrap;">MEDA</MudTh>
        <MudTh Style="white-space: nowrap;">WCMP</MudTh>
        <MudTh Style="white-space: nowrap;">WCBD</MudTh>
        <MudTh Style="white-space: nowrap;">WCBW</MudTh>
        <MudTh Style="white-space: nowrap;">Média</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd Style="white-space: nowrap;" DataLabel="Data">
            @context.Data.ToString("d/MMM", CultureInfo.CreateSpecificCulture("pt-PT"))
        </MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="Dia">@context.DiaSemana.Substring(0,3)</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="Total">@context.TotalDia</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="DEP">@context.Dep</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="% DEP">@context.DepPercentage</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="ARR">@context.Arr</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="% ARR">@context.ArrPercentage</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="JetBridge">@context.JetBridge</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="% JetBridge">@context.JetBridgePercentage</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="Remote">@context.Remote</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="% Remote">@context.RemotePercentage</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel=">36h">@context.Mais36</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="% >36h">@context.PercentageMais36</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="<36h">@context.Menos36</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCHR">@context.Wchr</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCHS">@context.Wchs</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCHC">@context.Wchc</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="MAAS">@context.Maas</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="BLND">@context.Blnd</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="DEAF">@context.Deaf</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="DPNA">@context.Dpna</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="STCR">@context.Stcr</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="MEDA">@context.Meda</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCMP">@context.Wcmp</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCBD">@context.Wcbd</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="WCBW">@context.Wcbw</MudTd>
        <MudTd Style="white-space: nowrap;" DataLabel="MÉDIA">@TimeOnly.FromTimeSpan(TimeSpan.FromMinutes(context.Media))</MudTd>
    </RowTemplate>
</MudTable>

@code {
    [Parameter]
    public IEnumerable<HistoricoDetalhe> Items { get; set; } = new List<HistoricoDetalhe>();
    [Parameter]
    public bool IsVisible { get; set; }
    [Parameter]
    public string HeaderText { get; set; } = string.Empty;
}*@