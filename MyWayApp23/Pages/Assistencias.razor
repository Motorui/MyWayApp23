@page "/assistencias"

<PageTitle>Detalhes</PageTitle>

<AuthorizeView Context="AuthContext">
    <Authorized>

        <MudGrid>
            <MudItem xs="2">
                <MudDatePicker Label="Mês" OpenTo="OpenTo.Month" Date="@_date"
                               DateChanged="OnDateChange" Required="true" DateFormat="MMM"
                               FixDay="1" AutoClose="true" />
            </MudItem>
            <MudItem xs="2"></MudItem>
            <MudItem xs="2"></MudItem>
            <MudItem xs="2"></MudItem>
            <MudItem xs="2"></MudItem>
            <MudItem xs="2"></MudItem>
            <MudItem xs="12">
                <MudTable Items="@detalhes" Dense="true" Hover="true" Bordered="true"
                          Striped="true" Loading="isVisible" RowsPerPage="31" FixedHeader="true" Height="400px">
                    <ToolBarContent>
                        @if (_date != null)
                        {
                            <MudText>
                                A mostrar detalhes para o mês de @_date.Value.ToString("MMM yy", CultureInfo.CreateSpecificCulture("pt-PT"))
                            </MudText>
                        }
                    </ToolBarContent>
                    <HeaderContent>
                        <MudTh Style="white-space: nowrap;">Data</MudTh>
                        <MudTh Style="white-space: nowrap;">Dia</MudTh>
                        <MudTh Style="white-space: nowrap;">Total</MudTh>
                        <MudTh Style="white-space: nowrap;">DEP</MudTh>
                        <MudTh Style="white-space: nowrap;">% DEP</MudTh>
                        <MudTh Style="white-space: nowrap;">ARR</MudTh>
                        <MudTh Style="white-space: nowrap;">% ARR</MudTh>
                        <MudTh Style="white-space: nowrap;">JetBridge</MudTh>
                        <MudTh Style="white-space: nowrap;">% JetBridge</MudTh>
                        <MudTh Style="white-space: nowrap;">Remote</MudTh>
                        <MudTh Style="white-space: nowrap;">% Remote</MudTh>
                        <MudTh Style="white-space: nowrap;">>36H</MudTh>
                        <MudTh Style="white-space: nowrap;">% >36H</MudTh>
                        <MudTh Style="white-space: nowrap;">&lt;36H</MudTh>
                        <MudTh Style="white-space: nowrap;">WCHR</MudTh>
                        <MudTh Style="white-space: nowrap;">WCHS</MudTh>
                        <MudTh Style="white-space: nowrap;">WCHC</MudTh>
                        <MudTh Style="white-space: nowrap;">MAAS</MudTh>
                        <MudTh Style="white-space: nowrap;">BLND</MudTh>
                        <MudTh Style="white-space: nowrap;">DEAF</MudTh>
                        <MudTh Style="white-space: nowrap;">DPNA</MudTh>
                        <MudTh Style="white-space: nowrap;">STCR</MudTh>
                        <MudTh Style="white-space: nowrap;">MEDA</MudTh>
                        <MudTh Style="white-space: nowrap;">WCMP</MudTh>
                        <MudTh Style="white-space: nowrap;">WCBD</MudTh>
                        <MudTh Style="white-space: nowrap;">WCBW</MudTh>
                        <MudTh Style="white-space: nowrap;">Média</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd Style="white-space: nowrap;" DataLabel="Data">
                            @context.Data.ToString("d/MMM", CultureInfo.CreateSpecificCulture("pt-PT"))
                        </MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="Dia">@context.DiaSemana.Substring(0,3)</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="Total">@context.TotalDia</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="DEP">@context.Dep</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="% DEP">@context.DepPercentage</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="ARR">@context.Arr</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="% ARR">@context.ArrPercentage</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="JetBridge">@context.JetBridge</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="% JetBridge">@context.JetBridgePercentage</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="Remote">@context.Remote</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="% Remote">@context.RemotePercentage</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel=">36h">@context.Mais36</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="% >36h">@context.PercentageMais36</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="<36h">@context.Menos36</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCHR">@context.Wchr</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCHS">@context.Wchs</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCHC">@context.Wchc</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="MAAS">@context.Maas</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="BLND">@context.Blnd</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="DEAF">@context.Deaf</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="DPNA">@context.Dpna</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="STCR">@context.Stcr</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="MEDA">@context.Meda</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCMP">@context.Wcmp</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCBD">@context.Wcbd</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="WCBW">@context.Wcbw</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="MÉDIA">@context.Media</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>

            <MudItem xs="12">
                <MudTable Items="@detalhesHora" Dense="true" Hover="true" Bordered="true"
                          Striped="true" Loading="isVisible" RowsPerPage="31" FixedHeader="true" Height="400px">
                    <ToolBarContent>
                        @if (_date != null)
                        {
                            <MudText>
                                A mostrar assistências por hora para o mês de @_date.Value.ToString("MMM yy", CultureInfo.CreateSpecificCulture("pt-PT"))
                            </MudText>
                        }
                    </ToolBarContent>
                    <HeaderContent>
                        <MudTh Style="white-space: nowrap;">Data</MudTh>
                        <MudTh Style="white-space: nowrap;">Dia</MudTh>
                        <MudTh Style="white-space: nowrap;">00:00</MudTh>
                        <MudTh Style="white-space: nowrap;">01:00</MudTh>
                        <MudTh Style="white-space: nowrap;">02:00</MudTh>
                        <MudTh Style="white-space: nowrap;">03:00</MudTh>
                        <MudTh Style="white-space: nowrap;">04:00</MudTh>
                        <MudTh Style="white-space: nowrap;">05:00</MudTh>
                        <MudTh Style="white-space: nowrap;">06:00</MudTh>
                        <MudTh Style="white-space: nowrap;">07:00</MudTh>
                        <MudTh Style="white-space: nowrap;">08:00</MudTh>
                        <MudTh Style="white-space: nowrap;">09:00</MudTh>
                        <MudTh Style="white-space: nowrap;">10:00</MudTh>
                        <MudTh Style="white-space: nowrap;">11:00</MudTh>
                        <MudTh Style="white-space: nowrap;">12:00</MudTh>
                        <MudTh Style="white-space: nowrap;">13:00</MudTh>
                        <MudTh Style="white-space: nowrap;">14:00</MudTh>
                        <MudTh Style="white-space: nowrap;">15:00</MudTh>
                        <MudTh Style="white-space: nowrap;">16:00</MudTh>
                        <MudTh Style="white-space: nowrap;">17:00</MudTh>
                        <MudTh Style="white-space: nowrap;">18:00</MudTh>
                        <MudTh Style="white-space: nowrap;">19:00</MudTh>
                        <MudTh Style="white-space: nowrap;">20:00</MudTh>
                        <MudTh Style="white-space: nowrap;">21:00</MudTh>
                        <MudTh Style="white-space: nowrap;">22:00</MudTh>
                        <MudTh Style="white-space: nowrap;">23:00</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd Style="white-space: nowrap;" DataLabel="Data">
                            @context.Data.ToString("d/MMM", CultureInfo.CreateSpecificCulture("pt-PT"))
                        </MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="Dia">@context.DiaSemana.Substring(0,3)</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="00:00">@context.Zero</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="01:00">@context.Uma</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Duas</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="03:00">@context.Tres</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="04:00">@context.Quatro</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="05:00">@context.Cinco</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="06:00">@context.Seis</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="07:00">@context.Sete</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="08:00">@context.Oito</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="09:00">@context.Nove</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="10:00">@context.Dez</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="11:00">@context.Onze</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="12:00">@context.Doze</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="13:00">@context.Treze</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="14:00">@context.Quatorze</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="15:00">@context.Quinze</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="16:00">@context.Dezaseis</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="17:00">@context.Dezasete</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="18:00">@context.Dezoito</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="19:00">@context.Dezanove</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="20:00">@context.Vinte</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="21:00">@context.Vinteeum</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="22:00">@context.Vinteedois</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="23:00">@context.Vinteetres</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>
            <MudItem xs="6">
                <MudTable Items="@detalhesHora" Dense="true" Hover="true" Bordered="true"
                          Striped="true" Loading="isVisible" RowsPerPage="31" FixedHeader="true" Height="400px">
                    <ToolBarContent>
                        @if (_date != null)
                        {
                            <MudText>
                                A mostrar assistências manhã, tarde e noite para o mês de @_date.Value.ToString("MMM yy", CultureInfo.CreateSpecificCulture("pt-PT"))
                            </MudText>
                        }
                    </ToolBarContent>
                    <HeaderContent>
                        <MudTh Style="white-space: nowrap;">Data</MudTh>
                        <MudTh Style="white-space: nowrap;">Dia</MudTh>
                        <MudTh Style="white-space: nowrap;">Manhã</MudTh>
                        <MudTh Style="white-space: nowrap;">Tarde</MudTh>
                        <MudTh Style="white-space: nowrap;">Noite</MudTh>

                    </HeaderContent>
                    <RowTemplate>
                        <MudTd Style="white-space: nowrap;" DataLabel="Data">
                            @context.Data.ToString("d/MMM", CultureInfo.CreateSpecificCulture("pt-PT"))
                        </MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="Dia">@context.DiaSemana.Substring(0,3)</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="00:00">@context.Manha</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="01:00">@context.Tarde</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Noite</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>
            <MudItem xs="6">
                <MudTable Items="@average" Dense="true" Hover="true" Bordered="true"
                          Striped="true" Loading="isVisible" RowsPerPage="31" FixedHeader="true" Height="400px">
                    <ToolBarContent>
                        @if (_date != null)
                        {
                            <MudText>
                                A mostrar média de partidas por mês e dia da semana.
                            </MudText>
                        }
                    </ToolBarContent>
                    <HeaderContent>
                        <MudTh Style="white-space: nowrap;">Mês</MudTh>
                        <MudTh Style="white-space: nowrap;">Seg</MudTh>
                        <MudTh Style="white-space: nowrap;">Ter</MudTh>
                        <MudTh Style="white-space: nowrap;">Qua</MudTh>
                        <MudTh Style="white-space: nowrap;">Qui</MudTh>
                        <MudTh Style="white-space: nowrap;">Sex</MudTh>
                        <MudTh Style="white-space: nowrap;">Sab</MudTh>
                        <MudTh Style="white-space: nowrap;">Dom</MudTh>
                    </HeaderContent>
                    <RowTemplate>
                        <MudTd Style="white-space: nowrap;" DataLabel="Dia">@context.Mes.Substring(0,3)</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="00:00">@context.Seg</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="01:00">@context.Ter</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Qua</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Qui</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Sex</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Sab</MudTd>
                        <MudTd Style="white-space: nowrap;" DataLabel="02:00">@context.Dom</MudTd>
                    </RowTemplate>
                </MudTable>
            </MudItem>
        </MudGrid>

    </Authorized>
    <NotAuthorized>
        <_403 />
    </NotAuthorized>
</AuthorizeView>
